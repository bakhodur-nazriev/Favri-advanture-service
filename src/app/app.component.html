<main class="main-page-content">
  <div>
    <h1 class="main-title">Авиабилеты в Fly.tj</h1>
    <p class="main-subtitle">Направление</p>

    <div class="card">
      <div class="input-from__block">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M9.02999 2.31L11.36 4.27C11.71 4.57 12.29 4.57 12.64 4.27L14.97 2.31C15.51 2.04 16.17 2.31 16.37 2.89L16.81 4.22C16.92 4.54 16.81 5.01 16.57 5.25L14.3 7.53C14.13 7.69 14 8.01 14 8.24V11.09C14 11.51 14.31 11.71 14.7 11.55L19.61 9.43C20.38 9.1 21.01 9.51 21.01 10.35V11.64C21.01 12.31 20.51 13.08 19.89 13.34L14.3 15.75C14.14 15.82 14 16.03 14 16.21V19.21C14 20.15 13.31 21.26 12.47 21.69C12.17 21.84 11.82 21.84 11.52 21.69C10.68 21.26 9.98999 20.14 9.98999 19.2V16.2C9.98999 16.02 9.84999 15.81 9.68999 15.74L4.10999 13.33C3.48999 13.08 2.98999 12.31 2.98999 11.64V10.35C2.98999 9.51 3.61999 9.1 4.38999 9.43L9.29999 11.55C9.67999 11.72 9.99999 11.51 9.99999 11.09V8.24C9.99999 8.01 9.86999 7.69 9.70999 7.53L7.43999 5.25C7.19999 5.01 7.08999 4.55 7.19999 4.22L7.63999 2.89C7.81999 2.31 8.47999 2.03 9.02999 2.31Z"
            stroke="#00B06C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>

        <div class="input-directions__inside-block">
          <span class="directions-input__title">Откуда</span>
          <app-custom-input
            type="text"
            [placeholder]="fromPlaceholder"
            [(ngModel)]="fromCity"
            [name]="fromCity"
            class="custom-input"
            (click)="openDirectionFromModal()"
          />
        </div>
      </div>

      <div class="divider-block">
        <div class="divider"></div>

        <button class="sort-vertical__button" (click)="swapLocations()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M16 18L16 6M16 6L20 10.125M16 6L12 10.125" stroke="#00B06C" stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M8 6L8 18M8 18L12 13.875M8 18L4 13.875" stroke="#00B06C" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <div class="input-where__block">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M12 13.43C13.7231 13.43 15.12 12.0331 15.12 10.31C15.12 8.58687 13.7231 7.19 12 7.19C10.2769 7.19 8.88 8.58687 8.88 10.31C8.88 12.0331 10.2769 13.43 12 13.43Z"
            stroke="#95A5A6" stroke-width="1.5"/>
          <path
            d="M3.61995 8.49C5.58995 -0.169998 18.42 -0.159997 20.38 8.5C21.53 13.58 18.37 17.88 15.6 20.54C13.59 22.48 10.41 22.48 8.38995 20.54C5.62995 17.88 2.46995 13.57 3.61995 8.49Z"
            stroke="#95A5A6" stroke-width="1.5"/>
        </svg>

        <div class="input-directions__inside-block">
          <span class="directions-input__title">Куда</span>
          <app-custom-input
            type="text"
            [placeholder]="toPlaceholder"
            [(ngModel)]="toCity"
            [name]="toCity"
            class="custom-input"
            (click)="openDirectionToModal()"
          />
        </div>
      </div>
    </div>

    <div class="date-passengers__block">
      <div class="left-block">
        <h4>Даты</h4>
        <button (click)="datepickerModalComponent.openModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M8 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M16 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M3.5 9.09001H20.5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path
              d="M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z"
              stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
              stroke-linejoin="round"/>
            <path d="M15.6946 13.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M15.6946 16.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M11.9954 13.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M11.9954 16.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M8.29443 13.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M8.29443 16.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
          </svg>

          <span>{{ selectedDateText }}</span>
        </button>
      </div>


      <div class="right-block">
        <h4>Пассажиры и класс</h4>
        <button (click)="openModalPassengers()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path
              d="M10 10C12.3012 10 14.1667 8.13452 14.1667 5.83334C14.1667 3.53215 12.3012 1.66667 10 1.66667C7.69885 1.66667 5.83337 3.53215 5.83337 5.83334C5.83337 8.13452 7.69885 10 10 10Z"
              stroke="#00B06C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M17.1583 18.3333C17.1583 15.1083 13.95 12.5 10 12.5C6.05001 12.5 2.84167 15.1083 2.84167 18.3333"
                  stroke="#00B06C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>

          <span>{{ passengers.adults + passengers.children + passengers.infantsWithoutSeat + passengers.infantsWithSeat }}
            пасс, {{ travelClass }}</span>
        </button>
      </div>
    </div>
  </div>

  <div class="search-ticket__block">
    <button class="btn-primary" (click)="searchTickets()">Найти билеты</button>
  </div>

  <app-direction-from-modal
    #directionFromModalComponent
    (selectDirection)="onDirectionFromSelected($event)"
  />

  <app-direction-to-modal
    #directionToModalComponent
    (selectDirection)="onDirectionToSelected($event)"
  />

  <app-modal-passengers
    #modalPassengers
    (selectPassengersAndClass)="handlePassengersAndClass($event)"
  />

  <app-datepicker-modal
    #datepickerModalComponent
    (datesSelected)="handleSelectedDates($event)"
  />

  <app-tickets-modal
    #ticketsModal
    [passengerCount]="passengerCount"
    [travelClassText]="travelClassText"
    [selectedDateText]="selectedDateText"
    [flights]="flights"
    [fromCity]="fromCity"
    [toCity]="toCity"
    [isLoading]="isLoading"
    (flightSelected)="onFlightSelected($event)"
  />

  <app-preorder-modal
    #preorderModal
    [fromCity]="fromCity"
    [toCity]="toCity"
    [included]="included"
    [flight]="selectedFlight"
    (flightSelected)="orderFlightSelected($event)"
  />

  <app-order-ticket-modal
    #orderTicketModal
    [passengers]="passengers"
    [flight]="selectedFlight"
    (detailPassengerSelected)="openDetailPassengerModal($event)"
  />

  <app-detail-passenger-modal
    #detailPassengerModal
    *ngIf="selectedPassenger"
    [passenger]="selectedPassenger"
  />
</main>

<router-outlet/>
