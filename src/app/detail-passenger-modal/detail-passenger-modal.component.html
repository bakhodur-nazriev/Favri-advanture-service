<div class="modal-background" *ngIf="isVisible">
  <div
    class="modal-content"
    @slideInOut
    (@slideInOut.done)="onAnimationEvent($event)"
    (click)="$event.stopPropagation()"
  >
    <div class="top-section d-flex align-center justify-between">
      <button class="arrow-left__button" (click)="closeModal()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M15 19.92L8.48 13.4C7.71 12.63 7.71 11.37 8.48 10.6L15 4.08" stroke="#1D2935" stroke-width="1.5"
                stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

      <span>{{ passenger.count }}</span>

      <button
        class="save-button"
        (click)="savePassengerData()"
      >
        Сохранить
      </button>
    </div>

    <h1>{{ passenger.count }}</h1>

    <div class="inputs-blocks">
      <div class="card-block">
        <div class="card">
          <input
            [(ngModel)]="name"
            placeholder="Имя"
            class="text-field"
            [class.error]="isValidationTriggered && !isLatin(name)"
            type="text"
          >
        </div>
        <div class="invalid-field" *ngIf="isValidationTriggered && !isLatin(name)">
          Поле должно быть заполнено и содержать только латинские буквы*
        </div>
      </div>

      <div class="card-block">
        <div class="card">
          <input
            [(ngModel)]="surname"
            placeholder="Фамилия"
            class="text-field"
            [class.error]="isValidationTriggered && !isLatin(surname)"
            type="text"
          >
        </div>
        <div class="invalid-field" *ngIf="isValidationTriggered && !isLatin(surname)">
          Поле должно быть заполнено и содержать только латинские буквы*
        </div>
      </div>

      <div class="card-block">
        <div class="card">
          <input
            [(ngModel)]="middleName"
            placeholder="Отчество"
            class="text-field"
            type="text"
          >
        </div>
      </div>
      <div class="card-block">
        <div
          class="card citizenship-block"
          [class.error]=" isValidationTriggered &&!passengerDataList[selectedIndex]?.citizenship"
          (click)="toggleDropdown()"
        >
          <span
            *ngIf="!passengerDataList[selectedIndex]?.citizenship"
            class="selector-country__title"
          >
            Гражданство
          </span>
          <span
            class="selected-country"
            *ngIf="passengerDataList[selectedIndex]?.citizenship"
          >
          {{ selectedCountry }}
        </span>
          <div class="dropdown" *ngIf="dropdownOpen" (click)="$event.stopPropagation()">
            <ul>
              <li
                *ngFor="let country of countries"
                (click)="selectCountry(country)"
              >
                {{ country.name }}
              </li>
            </ul>
          </div>
        </div>
        <div class="invalid-field" *ngIf=" isValidationTriggered &&!passengerDataList[selectedIndex]?.citizenship">
          Объязательное поле*
        </div>
      </div>
    </div>

    <div class="d-flex flex-column">
      <span class="gender-main__title">Пол</span>
      <div class="genders-block">
        <div
          class="gender-item active"
          [class.active]="passengerDataList[selectedIndex].gender === 'M'"
          (click)="selectGender('M')"
        >
          Мужской
        </div>
        <div
          class="gender-item"
          [class.active]="passengerDataList[selectedIndex].gender === 'F'"
          (click)="selectGender('F')"
        >
          Женский
        </div>
      </div>
    </div>

    <div class="inputs-blocks">
      <div class="birthday-block">
        <span>Дата рождения</span>
        <div class="card-block">
          <div
            [class.error]="isValidationTriggered && !passengerDataList[selectedIndex]?.date_of_birth"
            class="datepicker-block"
            (click)="picker.open()"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M7.99994 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M16.0001 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M3.49994 9.09003H20.4999" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10"
                    stroke-linecap="round" stroke-linejoin="round"/>
              <path
                d="M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z"
                stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                stroke-linejoin="round"/>
              <path d="M15.6946 13.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M15.6946 16.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M11.9954 13.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M11.9954 16.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M8.29443 13.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M8.29443 16.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
            <input
              matInput
              [(ngModel)]="passengerDataList[selectedIndex].date_of_birth"
              [matDatepicker]="picker"
              (dateChange)="onDateChange($event)"
            >
            <mat-datepicker #picker></mat-datepicker>
          </div>
          <div class="invalid-field" *ngIf="isValidationTriggered && !passengerDataList[selectedIndex]?.date_of_birth">
            Объязательное поле*
          </div>
        </div>
      </div>

      <div class="card-block">
        <div class="card citizenship-block" (click)="togglePassportDropdown()">
        <span
          *ngIf="!passengerDataList[selectedIndex]?.document_type"
          class="selector-passport__title"
        >
          Тип документа
        </span>
          <span
            class="selected-passport"
            *ngIf="passengerDataList[selectedIndex]?.document_type"
          >
          {{ selectedPassportType }}
        </span>
          <div class="dropdown" *ngIf="openDropdownPassport" (click)="$event.stopPropagation()">
            <ul>
              <li
                *ngFor="let passport of passports"
                (click)="selectPassport(passport.name, passport.code)"
              >
                {{ passport.name }}
              </li>
            </ul>
          </div>
        </div>
        <div class="invalid-field" *ngIf="!passengerDataList[selectedIndex]?.document_type">
          Объязательное поле*
        </div>
      </div>

      <div class="card-block">
        <div class="card">
          <input
            type="text"
            [(ngModel)]="passengerDataList[selectedIndex].document_number"
            placeholder="Серия и номер документа"
            [class.error]="isValidationTriggered && !passengerDataList[selectedIndex]?.document_number"
            class="text-field"
          >
        </div>
        <div class="invalid-field" *ngIf="isValidationTriggered && !passengerDataList[selectedIndex]?.document_number">
          Объязательное поле*
        </div>
      </div>
    </div>

    <div class="inputs-blocks">
      <div class="birthday-block">
        <span>Документ годен до</span>
        <div class="card-block">
          <div
            [class.error]="isValidationTriggered && !passengerDataList[selectedIndex]?.expiration_date"
            class="datepicker-block"
            (click)="pickerDocumentExpire.open()"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M7.99994 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M16.0001 2V5" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M3.49994 9.09003H20.4999" stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10"
                    stroke-linecap="round" stroke-linejoin="round"/>
              <path
                d="M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z"
                stroke="#00B06C" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                stroke-linejoin="round"/>
              <path d="M15.6946 13.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M15.6946 16.7H15.7036" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M11.9954 13.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M11.9954 16.7H12.0043" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M8.29443 13.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M8.29443 16.7H8.30342" stroke="#00B06C" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
            <input
              matInput
              [(ngModel)]="passengerDataList[selectedIndex].expiration_date"
              [matDatepicker]="pickerDocumentExpire"
              (dateChange)="onDocumentExpireDate($event)"
            >
            <mat-datepicker #pickerDocumentExpire></mat-datepicker>
          </div>
          <div class="invalid-field" *ngIf="isValidationTriggered && !passengerDataList[selectedIndex]?.expiration_date">
            Объязательное поле*
          </div>
        </div>
      </div>
    </div>

    <div class="inputs-blocks">
      <div class="card-block">
        <div class="card">
          <input
            [(ngModel)]="passengerDataList[selectedIndex].phone"
            placeholder="Номер телефона"
            class="text-field"
            [class.error]="isValidationTriggered && !passengerDataList[selectedIndex]?.phone"
            type="text"
            minlength="9"
            maxlength="9"
          >
        </div>
        <div class="invalid-field" *ngIf="isValidationTriggered && !passengerDataList[selectedIndex]?.phone">
          Объязательное поле*
        </div>
      </div>

      <div class="card-block">
        <div class="card">
          <input
            [(ngModel)]="passengerDataList[selectedIndex].email"
            placeholder="E-mail"
            class="text-field"
            [class.error]="isValidationTriggered && !passengerDataList[selectedIndex]?.email"
            type="text"
          >
        </div>
        <div class="invalid-field" *ngIf="isValidationTriggered && !passengerDataList[selectedIndex]?.email">
          Объязательное поле*
        </div>
      </div>
    </div>
  </div>
</div>
